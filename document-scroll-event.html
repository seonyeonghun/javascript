<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jquery scroll event example</title>
    <style>
        html { 
            font-size: 20px;
            scroll-behavior: smooth;
        }
        .contents {
            max-width: 90%;
            margin: 0 auto;
            display: flex;
        }
        .left {
            flex: 8
        }
        .right {
            flex: 2
        }
        #gnb {
            position: fixed;
            top: 5rem; /* 20 x 5 = 100px */
            right: 1rem;
        }
        h1 {
            margin: 0 0 5rem 0
        }
        p {
            height: 300px;
            background: gold;
        }
        .pink {
            background-color: pink;
        }
    </style>
    <script src="lib/jquery-3.6.1.js"></script>
</head>
<body>
    <div class="contents">
        <div class="left">
            <h1>sample document</h1>
            <h2>subject 1.</h2>
            <p class="subject1">subject 1. detail Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequuntur illum commodi officiis, non quas porro vitae cumque quisquam voluptas! Nisi, ipsam cupiditate! Incidunt libero beatae perferendis quos, saepe dolorem. Dicta.</p>
            <h2>subject 2.</h2>
            <p class="subject2">subject 2. detail Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequuntur illum commodi officiis, non quas porro vitae cumque quisquam voluptas! Nisi, ipsam cupiditate! Incidunt libero beatae perferendis quos, saepe dolorem. Dicta.</p>
            <h2>subject 3.</h2>
            <p class="subject3">subject 3. detail Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequuntur illum commodi officiis, non quas porro vitae cumque quisquam voluptas! Nisi, ipsam cupiditate! Incidunt libero beatae perferendis quos, saepe dolorem. Dicta.</p>
            <h2>subject 4.</h2>
            <p class="subject4">subject 4. detail Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequuntur illum commodi officiis, non quas porro vitae cumque quisquam voluptas! Nisi, ipsam cupiditate! Incidunt libero beatae perferendis quos, saepe dolorem. Dicta.</p>
            <h2>subject 5.</h2>
            <p class="subject5">subject 5. detail Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequuntur illum commodi officiis, non quas porro vitae cumque quisquam voluptas! Nisi, ipsam cupiditate! Incidunt libero beatae perferendis quos, saepe dolorem. Dicta.</p>
            <footer>footer contents. <a href="#">ceo.</a></footer>
        </div>
        <div class="right">
            <ul id="gnb">
                <li><a href="#">subject1</a></li>
                <li><a href="#">subject2</a></li>
                <li><a href="#">subject3</a></li>
                <li><a href="#">subject4</a></li>
                <li><a href="#">subject5</a></li>
            </ul>
        </div>
    </div>
    <script>
        $(function(){ 
            // 0. 변수선언
            let scTop; // undefined
            // 1. 스크롤이 시작되면 감지
            const sub1Top = parseInt($(".subject1").offset().top);
            const sub2Top = parseInt($(".subject2").offset().top);
            const sub3Top = parseInt($(".subject3").offset().top);
            const sub4Top = parseInt($(".subject4").offset().top);
            const sub5Top = parseInt($(".subject5").offset().top);
            
            const pOffset = [225,615,1005,1395,1784];
            // .push() : 맨뒤 추가
            // .pop() : 맨뒤 제거
            // .shift() : 맨앞 추가
            // .unshift() : 맨앞 제거
            // .length : 전체 배열원소 길이(갯수)
            
            $(window).scroll(function(){
                scTop = $(window).scrollTop(); // 소수점
                console.log("스크롤Top : "+parseInt(scTop))
                if(scTop > sub1Top && scTop < (sub1Top+300)) {
                    $("#gnb li").removeClass("pink")
                    $("#gnb li:nth-child(1)").addClass("pink")
                } else if(scTop > sub2Top && scTop < (sub2Top+300)) {
                    $("#gnb li").removeClass("pink")
                    $("#gnb li:nth-child(2)").addClass("pink")
                } else if (scTop > sub3Top && scTop < (sub3Top+300)) {
                    $("#gnb li").removeClass("pink")
                    $("#gnb li:nth-child(3)").addClass("pink")
                } else if (scTop > sub4Top && scTop < (sub4Top+300)) {
                    $("#gnb li").removeClass("pink")
                    $("#gnb li:nth-child(4)").addClass("pink")
                } else if (scTop > sub5Top && scTop < (sub5Top+300)) {
                    $("#gnb li").removeClass("pink")
                    $("#gnb li:nth-child(5)").addClass("pink")
                } else {
                    $("#gnb li").removeClass("pink");
                }
            })

            $("#gnb li").click(function(e){
                e.preventDefault();
                let el = $(this); // #gnb li a : 여러개
                let index = el.index(); // 반복가능 객체에서 인덱스를 알려주는 메소드                
                $(window).scrollTop(pOffset[index] - 50)
            })

            // 조건비교
            // 만약 현재 스크롤Top이 subject1~5까지 옵셋Top 보다 크면, (=해당 컨텐츠에 도달하면)
            // 내비게이션에 pink 클래스를 적용한다.
            
        })
    </script>
</body>
</html>